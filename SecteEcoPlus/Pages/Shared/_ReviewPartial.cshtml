@model SecteEcoPlus.Models.Message
@inject SecteUserManager UserManager
@inject SignInManager<SecteUser> SignInManager
@{
    ViewBag.UseReviewScripts = true;
    var profile = await UserManager.GetPublicProfileByUserAsync(User);
}
<div class="card m-2 @(ViewBag.IsRecent ?? false ? "review-recent-submit" : "")" data-review>
    <div class="card-body">
        <span>
            @{ var text = Model.Author?.GetDisplayName(UserManager) ?? "Anonyme"; }
            @if (Model.AuthorId != null)
            {
                <a asp-area="Identity" asp-page="/Profile/Index" asp-route-id="@Model.AuthorId"><b>@text</b></a>
            }
            else
            {
                <b>@text</b>
            }
            a dit le @Html.DisplayFor(m => m.PublishDate) :
        </span>
        <p>@Html.DisplayFor(m => m.Content)</p>
        @if (SignInManager.IsSignedIn(User) && profile.PublicProfileId == Model.AuthorId)
        {
            <a href="#" data-delete-request-url="@Url.Action("Delete", "Review", new {id = Model.MessageId})" class="btn btn-danger btn-sm">Supprimer</a>
        }
    </div>
</div>